<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Mastermind Game">
  <meta name="keywords" content="Mastermind">
  <title>Mastermind</title>
  <link rel="icon" href="./favicon-BufESGfV.png" type="image/png">
  <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const R=6,h=4,v=12;function x(e,t){let n={colors:[]};for(let i=0;i<e;i++)n.colors.push(D(t));return console.log(n),n}function D(e){return Math.floor(Math.random()*e)}function G(e,t){let n=S(e,t);return n.result.won===!1&&b(n),n.result}function S(e,t){let n={goal:[],set:[],result:{rightColorAndPos:0,rightColorOnly:0,won:!1}},i={color:0,checkDone:!1},o={color:0,checkDone:!1};return e.colors.forEach((c,s)=>{i.color=c,o.color=t[s],i.color===o.color?(i.checkDone=!0,o.checkDone=!0,n.result.rightColorAndPos++):(i.checkDone=!1,o.checkDone=!1),n.goal.push({color:i.color,checkDone:i.checkDone}),n.set.push({color:o.color,checkDone:o.checkDone})}),n.result.rightColorAndPos===e.colors.length&&(n.result.won=!0),n}function b(e){let t=!1;return e.goal.forEach(n=>{n.checkDone===!1&&(t=!1,e.set.forEach(i=>{i.checkDone===!1&&t===!1&&n.color===i.color&&(e.result.rightColorOnly++,n.checkDone=!0,i.checkDone=!0,t=!0)}))}),e}let d=0,a=0,l=[],r=0;function J(e){const t=document.getElementById("goalPins");let n=t==null?void 0:t.getElementsByClassName("pinSet");e.colors.forEach((i,o)=>{var s;let c="pinColor"+JSON.stringify(i);(s=n==null?void 0:n.item(o))==null||s.classList.add(c)})}function U(){var t;let e=document.getElementsByClassName("pinSel");for(let n=0;n<e.length;n++)(t=e.item(n))==null||t.addEventListener("click",()=>{q(e.item(n))})}function M(){let e=document.getElementById("undo");e==null||e.addEventListener("click",()=>{N()})}function W(){let e=document.getElementById("check");e==null||e.addEventListener("click",async()=>{await O()})}function H(){let e=document.getElementById("newGame");e==null||e.addEventListener("click",async()=>{T()})}function K(){let e=document.getElementById("header");e==null||e.addEventListener("click",async()=>{oe()})}function Y(e){const t=document.getElementById("gameRound1"),n=document.getElementById("board");for(let i=2;i<=e;i++){let o=t==null?void 0:t.cloneNode(!0);o.id="gameRound"+JSON.stringify(i);let c=o.getElementsByClassName("round");for(let s=0;s<c.length;s++)c.item(s).innerHTML=JSON.stringify(i);n==null||n.appendChild(o)}}async function q(e){await z()===!0&&await j(e)}async function I(){await L(),await f(),await m(),d++,a=0,l=[],r=0}async function w(e){const t=document.getElementById(e);return(t==null?void 0:t.classList.contains("disabled"))!==!0}async function p(e){let t=document.getElementById(e);t==null||t.classList.remove("disabled")}async function E(e){let t=document.getElementById(e);(t==null?void 0:t.classList.contains("disabled"))!==!0&&(t==null||t.classList.add("disabled"))}async function z(){return await w("colorPins")}async function L(){await p("colorPins")}async function y(){await E("colorPins")}async function F(){await p("undo")}async function f(){await E("undo")}async function P(){return await w("undo")}async function V(){await p("check")}async function m(){await E("check")}async function B(){return await w("check")}async function j(e){a++,r=Q(e),l.push(r),X(),await F(),a===h&&(await y(),await V())}async function N(){await P()&&(Z(),a--,l.pop(),l.length>0?r=l[l.length-1]:r=0),a===0&&await f(),a===h-1&&(await L(),await m())}function Q(e){let t="",n,i;return e.classList.forEach(o=>{o.startsWith("pinColor")&&(t=o)}),n=t.split("pinColor").pop(),i=parseInt(n),i}function X(){var o;let e="gameRound"+JSON.stringify(d),t=document.getElementById(e),n=t==null?void 0:t.getElementsByClassName("pinSet"),i="pinColor"+JSON.stringify(r);(o=n==null?void 0:n.item(a-1))==null||o.classList.add(i)}function Z(){var o;let e="gameRound"+JSON.stringify(d),t=document.getElementById(e),n=t==null?void 0:t.getElementsByClassName("pinSet"),i="pinColor"+JSON.stringify(r);(o=n==null?void 0:n.item(a-1))==null||o.classList.remove(i)}async function O(){let e;await B()&&(e=G(ae(),l),_(e),e.won===!0?(await m(),await f(),await y(),await k(),await ee()):d<v?await I():(await m(),await f(),await y(),await k(),await $()))}async function _(e){var c,s;let t="gameRound"+JSON.stringify(d),n=document.getElementById(t),i=n==null?void 0:n.getElementsByClassName("pinResult"),o=-1;if(e.rightColorAndPos>0)for(let u=1;u<=e.rightColorAndPos;u++)o++,(c=i==null?void 0:i.item(o))==null||c.classList.add("pinColorRightColorAndPos");if(e.rightColorOnly>0)for(let u=1;u<=e.rightColorOnly;u++)o++,(s=i==null?void 0:i.item(o))==null||s.classList.add("pinColorRightColorOnly")}async function C(e){let t=document.getElementById(e);t==null||t.classList.remove("hidden")}async function $(){await C("lost"),setTimeout(()=>{te()},5e3)}async function ee(){await C("won"),setTimeout(()=>{ne()},5e3)}async function k(){await C("goalPins")}async function A(e){let t=document.getElementById(e);(t==null?void 0:t.classList.contains("hidden"))!==!0&&(t==null||t.classList.add("hidden"))}async function te(){await A("lost")}async function ne(){await A("won")}function T(){location.reload()}function oe(){window.location.href="https://github.com/fmabap/Mastermind"}async function ie(){document.addEventListener("keydown",async e=>{if(e.key==="z"&&e.ctrlKey===!0||e.key==="Backspace"){await P()&&await N(),e.preventDefault();return}if(e.key==="n"){T(),e.preventDefault();return}if(e.key==="Enter"||e.code==="Space"){await B()&&await O(),e.preventDefault();return}switch(e.key){case"1":case"2":case"3":case"4":case"5":case"6":let t="pinColor"+(parseInt(e.key)-1).toString();document.getElementsByClassName(t).item(0).click(),e.preventDefault();return}},!1)}let g;window.addEventListener("load",()=>{ce()});function ce(){U(),M(),W(),H(),K(),ie(),Y(v),g=x(h,R),J(g),I(),se()}function se(){const e=document.getElementById("undo"),t=document.getElementById("check"),n=document.getElementById("newGame"),i=document.getElementById("won"),o=document.getElementById("lost");navigator.language.indexOf("de")>-1?(window.innerWidth>=640?e.innerText="Rückgängig":e.innerText="Rück-gängig",t.innerText="Prüfen",n.innerText="Neues Spiel",i.innerText="Du hast gewonnen",o.innerText="Du hast verloren"):(e.innerText="Undo",t.innerText="Check",n.innerText="New Game",i.innerText="You won",o.innerText="You lost")}function ae(){return g}
</script>
  <style rel="stylesheet" crossorigin>body{font-family:sans-serif;background-color:#000}.header{position:static;background-color:#6495ed;border:2px solid white;border-radius:10px;color:#fff;font-size:x-large;text-align:center;padding-top:.5rem;padding-bottom:.5rem;margin-bottom:10px;box-shadow:inset -5px -5px 10px #00000080;text-shadow:inset -5px -5px 10px rgba(0,0,0,.5);cursor:pointer}@media screen and (max-width: 640px){.content{display:flex}.actions{position:static;transform:scale(.75);transform-origin:0 0}.colorPinRow{width:72px;height:100%}.board{background-color:brown;border:2px solid white;border-radius:10px;box-shadow:inset -5px -5px 10px #00000080;margin:auto;transform:scale(.75);transform-origin:0 0}.button{background-color:#696969;color:#fff;box-shadow:inset -5px -5px 10px #00000080;width:50px;height:1em;margin-left:10px;margin-bottom:20px;margin-right:10px;padding-top:1em;padding-bottom:1em;border:2px solid white;border-radius:10px;text-align:center;cursor:pointer}#newGame,#undo{padding-top:.5em;padding-bottom:1.5em}}@media screen and (min-width: 641px){.actions{position:fixed;top:66px}.board{background-color:brown;border:2px solid white;border-radius:10px;box-shadow:inset -5px -5px 10px #00000080;width:330px;margin:auto}.colorPinRow{display:flex;width:144px;height:100%}.button{background-color:#696969;color:#fff;box-shadow:inset -5px -5px 10px #00000080;width:120px;height:1em;margin-left:10px;margin-bottom:20px;margin-right:10px;padding-top:1em;padding-bottom:1em;border:2px solid white;border-radius:10px;text-align:center;cursor:pointer}}#newGame{margin-top:50px}.goal{border:1px solid white;border-radius:10px;box-shadow:inset -5px -5px 10px #00000080;background-color:beige;margin:20px 20px 25px}.goalPins{display:flex;padding-left:64px;height:100%}.hidden{visibility:hidden}.pin{width:50px;height:50px;margin-bottom:20px;margin-left:10px;margin-right:10px;border:2px solid white;box-shadow:inset -5px -5px 10px #00000080;border-radius:50%}.pinColor0{background-color:red}.pinColor1{background-color:#00f}.pinColor2{background-color:#ff0}.pinColor3{background-color:green}.pinColor4{background-color:orange}.pinColor5{background-color:#8a2be2}.pinColorRightColorAndPos{background-color:#000}.pinColorRightColorOnly{background-color:#fff}.disabled{filter:brightness(25%)}.pinSel{cursor:pointer}.gameRound{background-color:#87cefa;border:1px solid white;border-radius:10px;box-shadow:inset -5px -5px 10px #00000080;display:flex;margin-left:20px;margin-right:20px;margin-bottom:10px}.round{align-self:center;text-align:center;text-shadow:inset -5px -5px 10px rgba(0,0,0,.5);width:25px;height:1.25rem;border:2px solid white;border-radius:33%;background-color:#d3d3d3;box-shadow:inset -5px -5px 10px #00000080;margin:2.5px 30px 2.5px 5px}.pinsSet{display:flex;align-self:center;align-content:center}.pinSet{width:25px;height:25px;margin:2.5px 5px;border:2px solid white;box-shadow:inset -5px -5px 10px #00000080;border-radius:50%}.pinsResultRow{display:flex;align-content:center}.pinsResult{margin:2.5px 5px 2.5px 30px}.pinResult{width:12.5px;height:12.5px;margin:1px;border:2px solid white;box-shadow:inset -3px -3px 5px #00000080;border-radius:50%}.bar{height:5rem;padding-top:3rem;border:2px solid white;border-radius:10px;box-shadow:inset -3px -3px 5px #00000080;text-align:center;position:fixed;align-self:center;font-size:xx-large;font-weight:700;width:80%;left:10%;top:45%}#won{background-color:gold}#lost{background-color:brown}
</style>
<link rel="manifest" href="./manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="./registerSW.js"></script></head>

<body>
  <div id="app">
    <div id="header" class="header"><span>Mastermind</span></div>
    <section class="content">
      <section class="actions">
        <form>
          <div id="colorPins">
            <div class="colorPinRow">
              <div class="pin pinColor0 pinSel">
              </div>
              <div class="pin pinColor1 pinSel">
              </div>
            </div>
            <div class="colorPinRow">
              <div class="pin pinColor2 pinSel">
              </div>
              <div class="pin pinColor3 pinSel">
              </div>
            </div>
            <div class="colorPinRow">
              <div class="pin pinColor4 pinSel">
              </div>
              <div class="pin pinColor5 pinSel">
              </div>
            </div>
          </div>
          <div id="undo" class="button ">Undo</div>
          <div id="check" class="button">Check</div>
          <div id="newGame" class="button">New Game</div>
        </form>
      </section>

      <section id="board" class="board">
        <div class="goal">
          <div id="goalPins" class="goalPins hidden">
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
          </div>
        </div>
        <div id="gameRound1" class="gameRound">
          <div class="round">1</div>
          <div class="pinsSet">
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
            <div class="pinSet"> </div>
          </div>
          <div class="pinsResult">
            <div class="pinsResultRow">
              <div class="pinResult"> </div>
              <div class="pinResult"> </div>
            </div>
            <div class="pinsResultRow">
              <div class="pinResult"> </div>
              <div class="pinResult"> </div>
            </div>
          </div>
        </div>
      </section>
    </section>

    <div id="won" class="hidden bar">You won</div>
    <div id="lost" class="hidden bar ">You lost</div>
  </div>
</body>

</html>