(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const B=6,g=4,L=12;function N(t,e){let n={colors:[]};for(let i=0;i<t;i++)n.colors.push(O(e));return console.log(n),n}function O(t){return Math.floor(Math.random()*t)}function A(t,e){let n=R(t,e);return n.result.won===!1&&b(n),n.result}function R(t,e){let n={goal:[],set:[],result:{rightColorAndPos:0,rightColorOnly:0,won:!1}},i={color:0,checkDone:!1},o={color:0,checkDone:!1};return t.colors.forEach((c,s)=>{i.color=c,o.color=e[s],i.color===o.color?(i.checkDone=!0,o.checkDone=!0,n.result.rightColorAndPos++):(i.checkDone=!1,o.checkDone=!1),n.goal.push({color:i.color,checkDone:i.checkDone}),n.set.push({color:o.color,checkDone:o.checkDone})}),n.result.rightColorAndPos===t.colors.length&&(n.result.won=!0),n}function b(t){let e=!1;return t.goal.forEach(n=>{n.checkDone===!1&&(e=!1,t.set.forEach(i=>{i.checkDone===!1&&e===!1&&n.color===i.color&&(t.result.rightColorOnly++,n.checkDone=!0,i.checkDone=!0,e=!0)}))}),t}let d=0,l=0,a=[],r=0;function S(t){const e=document.getElementById("goalPins");let n=e==null?void 0:e.getElementsByClassName("pinSet");t.colors.forEach((i,o)=>{var s;let c="pinColor"+JSON.stringify(i);(s=n==null?void 0:n.item(o))==null||s.classList.add(c)})}function G(){var e;let t=document.getElementsByClassName("pinSel");for(let n=0;n<t.length;n++)(e=t.item(n))==null||e.addEventListener("click",()=>{x(t.item(n))})}function J(){let t=document.getElementById("undo");t==null||t.addEventListener("click",()=>{j()})}function T(){let t=document.getElementById("check");t==null||t.addEventListener("click",async()=>{await Y()})}function D(){let t=document.getElementById("newGame");t==null||t.addEventListener("click",async()=>{nt()})}function M(){let t=document.getElementById("header");t==null||t.addEventListener("click",async()=>{ot()})}function U(t){const e=document.getElementById("gameRound1"),n=document.getElementById("board");for(let i=2;i<=t;i++){let o=e==null?void 0:e.cloneNode(!0);o.id="gameRound"+JSON.stringify(i);let c=o.getElementsByClassName("round");for(let s=0;s<c.length;s++)c.item(s).innerHTML=JSON.stringify(i);n==null||n.appendChild(o)}}async function x(t){await H()===!0&&await V(t)}async function v(){await I(),await f(),await m(),d++,l=0,a=[],r=0}async function w(t){const e=document.getElementById(t);return(e==null?void 0:e.classList.contains("disabled"))!==!0}async function C(t){let e=document.getElementById(t);e==null||e.classList.remove("disabled")}async function E(t){let e=document.getElementById(t);(e==null?void 0:e.classList.contains("disabled"))!==!0&&(e==null||e.classList.add("disabled"))}async function H(){return await w("colorPins")}async function I(){await C("colorPins")}async function y(){await E("colorPins")}async function W(){await C("undo")}async function f(){await E("undo")}async function q(){return await w("undo")}async function F(){await C("check")}async function m(){await E("check")}async function K(){return await w("check")}async function V(t){l++,r=z(t),a.push(r),Q(),await W(),l===g&&(await y(),await F())}async function j(){await q()&&(X(),l--,a.pop(),a.length>0?r=a[a.length-1]:r=0),l===0&&await f(),l===g-1&&(await I(),await m())}function z(t){let e="",n,i;return t.classList.forEach(o=>{o.startsWith("pinColor")&&(e=o)}),n=e.split("pinColor").pop(),i=parseInt(n),i}function Q(){var o;let t="gameRound"+JSON.stringify(d),e=document.getElementById(t),n=e==null?void 0:e.getElementsByClassName("pinSet"),i="pinColor"+JSON.stringify(r);(o=n==null?void 0:n.item(l-1))==null||o.classList.add(i)}function X(){var o;let t="gameRound"+JSON.stringify(d),e=document.getElementById(t),n=e==null?void 0:e.getElementsByClassName("pinSet"),i="pinColor"+JSON.stringify(r);(o=n==null?void 0:n.item(l-1))==null||o.classList.remove(i)}async function Y(){let t;await K()&&(t=A(ct(),a),Z(t),t.won===!0?(await m(),await f(),await y(),await k(),await $()):d<L?await v():(await m(),await f(),await y(),await k(),await _()))}async function Z(t){var c,s;let e="gameRound"+JSON.stringify(d),n=document.getElementById(e),i=n==null?void 0:n.getElementsByClassName("pinResult"),o=-1;if(t.rightColorAndPos>0)for(let u=1;u<=t.rightColorAndPos;u++)o++,(c=i==null?void 0:i.item(o))==null||c.classList.add("pinColorRightColorAndPos");if(t.rightColorOnly>0)for(let u=1;u<=t.rightColorOnly;u++)o++,(s=i==null?void 0:i.item(o))==null||s.classList.add("pinColorRightColorOnly")}async function p(t){let e=document.getElementById(t);e==null||e.classList.remove("hidden")}async function _(){await p("lost"),setTimeout(()=>{tt()},5e3)}async function $(){await p("won"),setTimeout(()=>{et()},5e3)}async function k(){await p("goalPins")}async function P(t){let e=document.getElementById(t);(e==null?void 0:e.classList.contains("hidden"))!==!0&&(e==null||e.classList.add("hidden"))}async function tt(){await P("lost")}async function et(){await P("won")}function nt(){location.reload()}function ot(){window.location.href="https://github.com/fmabap/Mastermind"}let h;window.addEventListener("load",()=>{it()});function it(){G(),J(),T(),D(),M(),U(L),h=N(g,B),S(h),v()}function ct(){return h}
